(function(r){function n(r){return r}function t(r,n){for(var t=0,e=n.length,u=Array(e);e>t;++t)u[t]=r[n[t]];return u}function e(r){function n(n,t,e,u){for(;u>e;){var f=e+u>>>1;r(n[f])<t?e=f+1:u=f}return e}function t(n,t,e,u){for(;u>e;){var f=e+u>>>1;t<r(n[f])?u=f:e=f+1}return e}return t.right=t,t.left=n,t}function u(r){function n(r,n,t){for(var u=t-n,f=(u>>>1)+1;--f>0;)e(r,f,u,n);return r}function t(r,n,t){for(var u,f=t-n;--f>0;)u=r[n],r[n]=r[n+f],r[n+f]=u,e(r,1,f,n);return r}function e(n,t,e,u){for(var f,o=n[--u+t],i=r(o);(f=t<<1)<=e&&(e>f&&r(n[u+f])>r(n[u+f+1])&&f++,!(i<=r(n[u+f])));)n[u+t]=n[u+f],t=f;n[u+t]=o}return n.sort=t,n}function f(r){function n(n,e,u,f){var o,i,a,c,l=Array(f=Math.min(u-e,f));for(i=0;f>i;++i)l[i]=n[e++];if(t(l,0,f),u>e){o=r(l[0]);do(a=r(c=n[e])>o)&&(l[0]=c,o=r(t(l,0,f)[0]));while(++e<u)}return l}var t=u(r);return n}function o(r){function n(n,t,e){for(var u=t+1;e>u;++u){for(var f=u,o=n[u],i=r(o);f>t&&r(n[f-1])>i;--f)n[f]=n[f-1];n[f]=o}return n}return n}function i(r){function n(r,n,u){return(U>u-n?e:t)(r,n,u)}function t(t,e,u){var f,o=0|(u-e)/6,i=e+o,a=u-1-o,c=e+u-1>>1,l=c-o,v=c+o,s=t[i],h=r(s),d=t[l],p=r(d),g=t[c],y=r(g),m=t[v],A=r(m),b=t[a],w=r(b);h>p&&(f=s,s=d,d=f,f=h,h=p,p=f),A>w&&(f=m,m=b,b=f,f=A,A=w,w=f),h>y&&(f=s,s=g,g=f,f=h,h=y,y=f),p>y&&(f=d,d=g,g=f,f=p,p=y,y=f),h>A&&(f=s,s=m,m=f,f=h,h=A,A=f),y>A&&(f=g,g=m,m=f,f=y,y=A,A=f),p>w&&(f=d,d=b,b=f,f=p,p=w,w=f),p>y&&(f=d,d=g,g=f,f=p,p=y,y=f),A>w&&(f=m,m=b,b=f,f=A,A=w,w=f);var k=d,x=p,O=m,E=A;t[i]=s,t[l]=t[e],t[c]=g,t[v]=t[u-1],t[a]=b;var M=e+1,U=u-2,P=E>=x&&x>=E;if(P)for(var z=M;U>=z;++z){var C=t[z],N=r(C);if(x>N)z!==M&&(t[z]=t[M],t[M]=C),++M;else if(N>x)for(;;){var S=r(t[U]);{if(!(S>x)){if(x>S){t[z]=t[M],t[M++]=t[U],t[U--]=C;break}t[z]=t[U],t[U--]=C;break}U--}}}else for(var z=M;U>=z;z++){var C=t[z],N=r(C);if(x>N)z!==M&&(t[z]=t[M],t[M]=C),++M;else if(N>E)for(;;){var S=r(t[U]);{if(!(S>E)){x>S?(t[z]=t[M],t[M++]=t[U],t[U--]=C):(t[z]=t[U],t[U--]=C);break}if(U--,z>U)break}}}if(t[e]=t[M-1],t[M-1]=k,t[u-1]=t[U+1],t[U+1]=O,n(t,e,M-1),n(t,U+2,u),P)return t;if(i>M&&U>a){for(var V,S;(V=r(t[M]))<=x&&V>=x;)++M;for(;(S=r(t[U]))<=E&&S>=E;)--U;for(var z=M;U>=z;z++){var C=t[z],N=r(C);if(x>=N&&N>=x)z!==M&&(t[z]=t[M],t[M]=C),M++;else if(E>=N&&N>=E)for(;;){var S=r(t[U]);{if(!(E>=S&&S>=E)){x>S?(t[z]=t[M],t[M++]=t[U],t[U--]=C):(t[z]=t[U],t[U--]=C);break}if(U--,z>U)break}}}}return n(t,M,U+1)}var e=o(r);return n}function a(r){return Array(r)}function c(r,n){return function(t){var e=t.length;return[r.left(t,n,0,e),r.right(t,n,0,e)]}}function l(r,n){var t=n[0],e=n[1];return function(n){var u=n.length;return[r.left(n,t,0,u),r.left(n,e,0,u)]}}function v(r){return[0,r.length]}function s(){return null}function h(){return 0}function d(r){return r+1}function p(r){return r-1}function g(r){return function(n,t){return n+ +r(t)}}function y(r){return function(n,t){return n-r(t)}}function m(){function r(r){var n=O,t=r.length;return t&&(x=x.concat(r),U=N(U,O+=t),C.forEach(function(e){e(r,n,t)})),m}function e(r){function e(n,e,u){Q=n.map(r),T=$(b(u),0,u),Q=t(Q,T);var f,o,i=_(Q),a=i[0],c=i[1];if(W)for(f=0;u>f;++f)W(Q[f],o=T[f]+e)||(U[o]|=Y);else{for(f=0;a>f;++f)U[T[f]+e]|=Y;for(f=c;u>f;++f)U[T[f]+e]|=Y}if(!e)return K=Q,L=T,tn=a,en=c,void 0;var l=K,v=L,s=0,h=0;for(K=Array(O),L=A(O,O),f=0;e>s&&u>h;++f)l[s]<Q[h]?(K[f]=l[s],L[f]=v[s++]):(K[f]=Q[h],L[f]=T[h++]+e);for(;e>s;++s,++f)K[f]=l[s],L[f]=v[s];for(;u>h;++h,++f)K[f]=Q[h],L[f]=T[h]+e;i=_(K),tn=i[0],en=i[1]}function o(r,n,t){rn.forEach(function(r){r(Q,T,n,t)}),Q=T=null}function a(r){var n,t,e,u=r[0],f=r[1],o=[],i=[],a=fn||un;if(W)return W=null,R(function(r,n){return n>=u&&f>n},a),tn=u,en=f,X;if(fn){for(n=0;O>n;++n)U[L[n]]|=Y;tn=0,en=0,fn=!1}if(un){for(n=u;f>n;++n)U[L[n]]&=Z;tn>u&&(tn=u),f>en&&(en=f)}else{if(tn>u)for(n=u,t=Math.min(tn,f);t>n;++n)U[e=L[n]]^=Y,o.push(e);else if(u>tn)for(n=tn,t=Math.min(u,en);t>n;++n)U[e=L[n]]^=Y,i.push(e);if(f>en)for(n=Math.max(u,en),t=f;t>n;++n)U[e=L[n]]^=Y,o.push(e);else if(en>f)for(n=Math.max(tn,f),t=en;t>n;++n)U[e=L[n]]^=Y,i.push(e);tn=u,en=f}return z.forEach(function(r){r(Y,o,i,a)}),X}function m(r){if(arguments.length>1){for(var n=0,t=arguments.length;t>n;++n)1===n&&(un=!0),Array.isArray(r)?V(r):"function"==typeof r?F(r):P(r);return un=!1,fn=!0,X}return null==r?q():Array.isArray(r)?V(r):"function"==typeof r?F(r):P(r)}function P(r){return a((_=c(k,r))(K))}function V(r){return a((_=l(k,r))(K))}function q(){return a((_=v)(K))}function F(r){return _=v,R(W=r,fn),tn=0,en=O,X}function R(r){var n,t,e,u=[],f=[];for(n=0;O>n;++n)!(U[t=L[n]]&Y)^(e=r(K[n],t))&&(e?(U[t]&=Z,u.push(t)):(U[t]|=Y,f.push(t)));z.forEach(function(r){r(Y,u,f,!1)})}function j(r){for(var n,t=[],e=en;--e>=tn&&r>0;)U[n=L[e]]||(t.push(x[n]),--r);return t}function B(r){for(var n,t=[],e=tn;en>e&&r>0;)U[n=L[e]]||(t.push(x[n]),--r),e++;return t}function D(n){for(var t,e=[],u=en;--u>=tn&&n>0;)U[t=L[u]]||(e.push(r(x[t])),--n);return e}function G(n){for(var t,e=[],u=tn;en>u&&n>0;)U[t=L[u]]||(e.push(r(x[t])),--n),u++;return e}function H(r){function t(n,t,u,f){function c(){++I===H&&(m=S(m,G<<=1),q=S(q,G),H=w(G))}var l,v,h,d,p,g,y=V,m=A(I,H),b=j,k=D,E=I,M=0,P=0;for(T&&(b=k=s),V=Array(I),I=0,q=E>1?N(q,O):A(O,H),E&&(h=(v=y[0]).key);f>P&&!((d=r(n[P]))>=d);)++P;for(;f>P;){for(v&&d>=h?(p=v,g=h,m[M]=I,(v=y[++M])&&(h=v.key)):(p={key:d,value:k()},g=d),V[I]=p;!(d>g||(q[l=t[P]+u]=I,U[l]&Z||(p.value=b(p.value,x[l])),++P>=f));)d=r(n[P]);c()}for(;E>M;)V[m[M]=I]=y[M++],c();if(I>M)for(M=0;u>M;++M)q[M]=m[q[M]];l=z.indexOf(J),I>1?(J=e,Q=i):(1===I?(J=o,Q=a):(J=s,Q=s),q=null),z[l]=J}function e(r,n,t,e){if(r!==Y&&!(T=T||e)){var u,f,o,i;for(u=0,o=n.length;o>u;++u)U[f=n[u]]&Z||(i=V[q[f]],i.value=j(i.value,x[f]));for(u=0,o=t.length;o>u;++u)(U[f=t[u]]&Z)===r&&(i=V[q[f]],i.value=B(i.value,x[f]))}}function o(r,n,t,e){if(r!==Y&&!(T=T||e)){var u,f,o,i=V[0];for(u=0,o=n.length;o>u;++u)U[f=n[u]]&Z||(i.value=j(i.value,x[f]));for(u=0,o=t.length;o>u;++u)(U[f=t[u]]&Z)===r&&(i.value=B(i.value,x[f]))}}function i(){var r,n;for(r=0;I>r;++r)V[r].value=D();for(r=0;O>r;++r)U[r]&Z||(n=V[q[r]],n.value=j(n.value,x[r]))}function a(){var r,n=V[0];for(n.value=D(),r=0;O>r;++r)U[r]&Z||(n.value=j(n.value,x[r]))}function c(){return T&&(Q(),T=!1),V}function l(r){var n=F(c(),0,V.length,r);return R.sort(n,0,n.length)}function v(r,n,t){return j=r,B=n,D=t,T=!0,C}function m(){return v(d,p,h)}function b(r){return v(g(r),y(r),h)}function k(r){function n(n){return r(n.value)}return F=f(n),R=u(n),C}function E(){return k(n)}function M(){return I}function P(){var r=z.indexOf(J);return r>=0&&z.splice(r,1),r=rn.indexOf(t),r>=0&&rn.splice(r,1),C}var C={top:l,all:c,reduce:v,reduceCount:m,reduceSum:b,order:k,orderNatural:E,size:M,remove:P};nn.push(C);var V,q,F,R,j,B,D,G=8,H=w(G),I=0,J=s,Q=s,T=!0;return arguments.length<1&&(r=n),z.push(J),rn.push(t),t(K,L,0,O),m().orderNatural()}function I(){var r=H(s),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function J(){nn.forEach(function(r){r.remove()});var r=C.indexOf(e);for(r>=0&&C.splice(r,1),r=C.indexOf(o),r>=0&&C.splice(r,1),r=0;O>r;++r)U[r]&=Z;return E&=Z,X}var K,L,Q,T,W,X={value:r,filter:m,filterExact:P,filterRange:V,filterFunction:F,filterAll:q,top:j,bottom:B,topValues:D,bottomValues:G,group:H,groupAll:I,remove:J},Y=~E&-~E,Z=~Y,$=i(function(r){return Q[r]}),_=v,rn=[],nn=[],tn=0,en=0,un=!1,fn=!1;return C.unshift(e),C.push(o),E|=Y,(M>=32?!Y:E&(1<<M)-1)&&(U=S(U,M<<=1)),e(x,0,O),o(x,0,O),X}function o(){function r(r,n){var t;if(!m)for(t=n;O>t;++t)U[t]||(a=c(a,x[t]))}function n(r,n,t,e){var u,f,o;if(!(m=m||e)){for(u=0,o=n.length;o>u;++u)U[f=n[u]]||(a=c(a,x[f]));for(u=0,o=t.length;o>u;++u)U[f=t[u]]===r&&(a=l(a,x[f]))}}function t(){var r;for(a=v(),r=0;O>r;++r)U[r]||(a=c(a,x[r]))}function e(r,n,t){return c=r,l=n,v=t,m=!0,s}function u(){return e(d,p,h)}function f(r){return e(g(r),y(r),h)}function o(){return m&&(t(),m=!1),a}function i(){var t=z.indexOf(n);return t>=0&&z.splice(t),t=C.indexOf(r),t>=0&&C.splice(t),s}var a,c,l,v,s={reduce:e,reduceCount:u,reduceSum:f,value:o,remove:i},m=!0;return z.push(n),C.push(r),r(x,0,O),u()}function a(){return O}var m={add:r,dimension:e,groupAll:o,size:a},x=[],O=0,E=0,M=8,U=P(0),z=[],C=[];return arguments.length?r(arguments[0]):m}function A(r,n){return(257>n?P:65537>n?z:C)(r)}function b(r){for(var n=A(r,r),t=-1;++t<r;)n[t]=t;return n}function w(r){return 8===r?256:16===r?65536:4294967296}m.version="1.2.0",m.permute=t;var k=m.bisect=e(n);k.by=e;var x=m.heap=u(n);x.by=u;var O=m.heapselect=f(n);O.by=f;var E=m.insertionsort=o(n);E.by=o;var M=m.quicksort=i(n);M.by=i;var U=32,P=a,z=a,C=a,N=n,S=n,V="undefined"!=typeof window&&window.navigator&&!!window.navigator.userAgent.match(/(iPad|iPhone|iPod).*CPU OS 4/g);"undefined"==typeof Uint8Array||V||(P=function(r){return new Uint8Array(r)},z=function(r){return new Uint16Array(r)},C=function(r){return new Uint32Array(r)},N=function(r,n){var t=new r.constructor(n);return t.set(r),t},S=function(r,n){var t;switch(n){case 16:t=z(r.length);break;case 32:t=C(r.length);break;default:throw Error("invalid array width!")}return t.set(r),t}),r.crossfilter=m})(this);