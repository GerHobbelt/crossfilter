(function(r){function n(r){return r}function t(r,n){for(var t=0,u=n.length,e=Array(u);u>t;++t)e[t]=r[n[t]];return e}function u(r){function n(n,t,u,e){for(;e>u;){var f=u+e>>>1;t>r(n[f])?u=f+1:e=f}return u}function t(n,t,u,e){for(;e>u;){var f=u+e>>>1;r(n[f])>t?e=f:u=f+1}return u}return t.right=t,t.left=n,t}function e(r){function n(r,n,t){for(var e=t-n,f=(e>>>1)+1;--f>0;)u(r,f,e,n);return r}function t(r,n,t){for(var e,f=t-n;--f>0;)e=r[n],r[n]=r[n+f],r[n+f]=e,u(r,1,f,n);return r}function u(n,t,u,e){for(var f,o=n[--e+t],i=r(o);u>=(f=t<<1)&&(u>f&&r(n[e+f])>r(n[e+f+1])&&f++,!(r(n[e+f])>=i));)n[e+t]=n[e+f],t=f;n[e+t]=o}return n.sort=t,n}function f(r){function n(n,u,e,f){var o,i,a,c,l=Array(f=Math.min(e-u,f));for(i=0;f>i;++i)l[i]=n[u++];if(t(l,0,f),e>u){o=r(l[0]);do(a=r(c=n[u])>o)&&(l[0]=c,o=r(t(l,0,f)[0]));while(e>++u)}return l}var t=e(r);return n}function o(r){function n(n,t,u){for(var e=t+1;u>e;++e){for(var f=e,o=n[e],i=r(o);f>t&&r(n[f-1])>i;--f)n[f]=n[f-1];n[f]=o}return n}return n}function i(r){function n(r,n,e){return(U>e-n?u:t)(r,n,e)}function t(t,u,e){var f,o=0|(e-u)/6,i=u+o,a=e-1-o,c=u+e-1>>1,l=c-o,v=c+o,s=t[i],h=r(s),p=t[l],d=r(p),g=t[c],y=r(g),m=t[v],b=r(m),A=t[a],k=r(A);h>d&&(f=s,s=p,p=f,f=h,h=d,d=f),b>k&&(f=m,m=A,A=f,f=b,b=k,k=f),h>y&&(f=s,s=g,g=f,f=h,h=y,y=f),d>y&&(f=p,p=g,g=f,f=d,d=y,y=f),h>b&&(f=s,s=m,m=f,f=h,h=b,b=f),y>b&&(f=g,g=m,m=f,f=y,y=b,b=f),d>k&&(f=p,p=A,A=f,f=d,d=k,k=f),d>y&&(f=p,p=g,g=f,f=d,d=y,y=f),b>k&&(f=m,m=A,A=f,f=b,b=k,k=f);var x=p,w=d,E=m,O=b;t[i]=s,t[l]=t[u],t[c]=g,t[v]=t[e-1],t[a]=A;var M=u+1,U=e-2,z=O>=w&&w>=O;if(z)for(var N=M;U>=N;++N){var C=t[N],S=r(C);if(w>S)N!==M&&(t[N]=t[M],t[M]=C),++M;else if(S>w)for(;;){var V=r(t[U]);{if(!(V>w)){if(w>V){t[N]=t[M],t[M++]=t[U],t[U--]=C;break}t[N]=t[U],t[U--]=C;break}U--}}}else for(var N=M;U>=N;N++){var C=t[N],S=r(C);if(w>S)N!==M&&(t[N]=t[M],t[M]=C),++M;else if(S>O)for(;;){var V=r(t[U]);{if(!(V>O)){w>V?(t[N]=t[M],t[M++]=t[U],t[U--]=C):(t[N]=t[U],t[U--]=C);break}if(U--,N>U)break}}}if(t[u]=t[M-1],t[M-1]=x,t[e-1]=t[U+1],t[U+1]=E,n(t,u,M-1),n(t,U+2,e),z)return t;if(i>M&&U>a){for(var q,V;w>=(q=r(t[M]))&&q>=w;)++M;for(;O>=(V=r(t[U]))&&V>=O;)--U;for(var N=M;U>=N;N++){var C=t[N],S=r(C);if(w>=S&&S>=w)N!==M&&(t[N]=t[M],t[M]=C),M++;else if(O>=S&&S>=O)for(;;){var V=r(t[U]);{if(!(O>=V&&V>=O)){w>V?(t[N]=t[M],t[M++]=t[U],t[U--]=C):(t[N]=t[U],t[U--]=C);break}if(U--,N>U)break}}}}return n(t,M,U+1)}var u=o(r);return n}function a(r){return Array(r)}function c(r,n){return function(t){var u=t.length;return[r.left(t,n,0,u),r.right(t,n,0,u)]}}function l(r,n){var t=n[0],u=n[1];return function(n){var e=n.length;return[r.left(n,t,0,e),r.left(n,u,0,e)]}}function v(r){return[0,r.length]}function s(){return null}function h(){return 0}function p(r){return r+1}function d(r){return r-1}function g(r){return function(n,t){return n+ +r(t)}}function y(r){return function(n,t){return n-r(t)}}function m(){function r(r){var n=E,t=r.length;return t&&(w=w.concat(r),U=S(U,E+=t),C.forEach(function(u){u(r,n,t)})),m}function u(r){function u(n,u,e){Q=n.map(r),T=$(A(e),0,e),Q=t(Q,T);var f,o,i=_(Q),a=i[0],c=i[1];if(W)for(f=0;e>f;++f)W(Q[f],o=T[f]+u)||(U[o]|=Y);else{for(f=0;a>f;++f)U[T[f]+u]|=Y;for(f=c;e>f;++f)U[T[f]+u]|=Y}if(!u)return L=Q,P=T,tn=a,un=c,void 0;var l=L,v=P,s=0,h=0;for(L=Array(E),P=b(E,E),f=0;u>s&&e>h;++f)l[s]<Q[h]?(L[f]=l[s],P[f]=v[s++]):(L[f]=Q[h],P[f]=T[h++]+u);for(;u>s;++s,++f)L[f]=l[s],P[f]=v[s];for(;e>h;++h,++f)L[f]=Q[h],P[f]=T[h]+u;i=_(L),tn=i[0],un=i[1]}function o(r,n,t){rn.forEach(function(r){r(Q,T,n,t)}),Q=T=null}function a(r){var n=r[0],t=r[1];if(W)return W=null,j(function(r,u){return u>=n&&t>u}),tn=n,un=t,X;var u,e,f,o=[],i=[];if(tn>n)for(u=n,e=Math.min(tn,t);e>u;++u)U[f=P[u]]^=Y,o.push(f);else if(n>tn)for(u=tn,e=Math.min(n,un);e>u;++u)U[f=P[u]]^=Y,i.push(f);if(t>un)for(u=Math.max(n,un),e=t;e>u;++u)U[f=P[u]]^=Y,o.push(f);else if(un>t)for(u=Math.max(tn,t),e=un;e>u;++u)U[f=P[u]]^=Y,i.push(f);return tn=n,un=t,N.forEach(function(r){r(Y,o,i)}),X}function m(r){return null==r?F():Array.isArray(r)?q(r):"function"==typeof r?R(r):z(r)}function z(r){return a((_=c(x,r))(L))}function q(r){return a((_=l(x,r))(L))}function F(){return a((_=v)(L))}function R(r){return _=v,j(W=r),tn=0,un=E,X}function j(r){var n,t,u,e=[],f=[];for(n=0;E>n;++n)!(U[t=P[n]]&Y)^(u=r(L[n],t))&&(u?(U[t]&=Z,e.push(t)):(U[t]|=Y,f.push(t)));N.forEach(function(r){r(Y,e,f)})}function B(r){for(var n,t=[],u=un;--u>=tn&&r>0;)U[n=P[u]]||(t.push(w[n]),--r);return t}function D(r){for(var n,t=[],u=tn;un>u&&r>0;)U[n=P[u]]||(t.push(w[n]),--r),u++;return t}function G(n){for(var t,u=[],e=un;--e>=tn&&n>0;)U[t=P[e]]||(u.push(r(w[t])),--n);return u}function H(n){for(var t,u=[],e=tn;un>e&&n>0;)U[t=P[e]]||(u.push(r(w[t])),--n),e++;return u}function I(r){function t(n,t,e,f){function c(){++J===I&&(m=V(m,H<<=1),F=V(F,H),I=k(H))}var l,v,h,p,d,g,y=q,m=b(J,I),A=B,x=G,O=J,M=0,z=0;for(T&&(A=x=s),q=Array(J),J=0,F=O>1?S(F,E):b(E,I),O&&(h=(v=y[0]).key);f>z&&!((p=r(n[z]))>=p);)++z;for(;f>z;){for(v&&p>=h?(d=v,g=h,m[M]=J,(v=y[++M])&&(h=v.key)):(d={key:p,value:x()},g=p),q[J]=d;!(p>g||(F[l=t[z]+e]=J,U[l]&Z||(d.value=A(d.value,w[l])),++z>=f));)p=r(n[z]);c()}for(;O>M;)q[m[M]=J]=y[M++],c();if(J>M)for(M=0;e>M;++M)F[M]=m[F[M]];l=N.indexOf(K),J>1?(K=u,Q=i):(1===J?(K=o,Q=a):(K=s,Q=s),F=null),N[l]=K}function u(r,n,t){if(r!==Y&&!T){var u,e,f,o;for(u=0,f=n.length;f>u;++u)U[e=n[u]]&Z||(o=q[F[e]],o.value=B(o.value,w[e]));for(u=0,f=t.length;f>u;++u)(U[e=t[u]]&Z)===r&&(o=q[F[e]],o.value=D(o.value,w[e]))}}function o(r,n,t){if(r!==Y&&!T){var u,e,f,o=q[0];for(u=0,f=n.length;f>u;++u)U[e=n[u]]&Z||(o.value=B(o.value,w[e]));for(u=0,f=t.length;f>u;++u)(U[e=t[u]]&Z)===r&&(o.value=D(o.value,w[e]))}}function i(){var r,n;for(r=0;J>r;++r)q[r].value=G();for(r=0;E>r;++r)U[r]&Z||(n=q[F[r]],n.value=B(n.value,w[r]))}function a(){var r,n=q[0];for(n.value=G(),r=0;E>r;++r)U[r]&Z||(n.value=B(n.value,w[r]))}function c(){return T&&(Q(),T=!1),q}function l(r){var n=R(c(),0,q.length,r);return j.sort(n,0,n.length)}function v(r,n,t){return B=r,D=n,G=t,T=!0,C}function m(){return v(p,d,h)}function A(r){return v(g(r),y(r),h)}function x(r){function n(n){return r(n.value)}return R=f(n),j=e(n),C}function O(){return x(n)}function M(){return J}function z(){var r=N.indexOf(K);return r>=0&&N.splice(r,1),r=rn.indexOf(t),r>=0&&rn.splice(r,1),C}var C={top:l,all:c,reduce:v,reduceCount:m,reduceSum:A,order:x,orderNatural:O,size:M,remove:z};nn.push(C);var q,F,R,j,B,D,G,H=8,I=k(H),J=0,K=s,Q=s,T=!0;return 1>arguments.length&&(r=n),N.push(K),rn.push(t),t(L,P,0,E),m().orderNatural()}function J(){var r=I(s),n=r.all;return delete r.all,delete r.top,delete r.order,delete r.orderNatural,delete r.size,r.value=function(){return n()[0].value},r}function K(){nn.forEach(function(r){r.remove()});var r=C.indexOf(u);for(r>=0&&C.splice(r,1),r=C.indexOf(o),r>=0&&C.splice(r,1),r=0;E>r;++r)U[r]&=Z;return O&=Z,X}var L,P,Q,T,W,X={value:r,filter:m,filterExact:z,filterRange:q,filterFunction:R,filterAll:F,top:B,bottom:D,topValues:G,bottomValues:H,group:I,groupAll:J,remove:K},Y=~O&-~O,Z=~Y,$=i(function(r){return Q[r]}),_=v,rn=[],nn=[],tn=0,un=0;return C.unshift(u),C.push(o),O|=Y,(M>=32?!Y:O&(1<<M)-1)&&(U=V(U,M<<=1)),u(w,0,E),o(w,0,E),X}function o(){function r(r,n){var t;if(!m)for(t=n;E>t;++t)U[t]||(a=c(a,w[t]))}function n(r,n,t){var u,e,f;if(!m){for(u=0,f=n.length;f>u;++u)U[e=n[u]]||(a=c(a,w[e]));for(u=0,f=t.length;f>u;++u)U[e=t[u]]===r&&(a=l(a,w[e]))}}function t(){var r;for(a=v(),r=0;E>r;++r)U[r]||(a=c(a,w[r]))}function u(r,n,t){return c=r,l=n,v=t,m=!0,s}function e(){return u(p,d,h)}function f(r){return u(g(r),y(r),h)}function o(){return m&&(t(),m=!1),a}function i(){var t=N.indexOf(n);return t>=0&&N.splice(t),t=C.indexOf(r),t>=0&&C.splice(t),s}var a,c,l,v,s={reduce:u,reduceCount:e,reduceSum:f,value:o,remove:i},m=!0;return N.push(n),C.push(r),r(w,0,E),e()}function a(){return E}var m={add:r,dimension:u,groupAll:o,size:a},w=[],E=0,O=0,M=8,U=z(0),N=[],C=[];return arguments.length?r(arguments[0]):m}function b(r,n){return(257>n?z:65537>n?N:C)(r)}function A(r){for(var n=b(r,r),t=-1;r>++t;)n[t]=t;return n}function k(r){return 8===r?256:16===r?65536:4294967296}m.version="1.2.0",m.permute=t;var x=m.bisect=u(n);x.by=u;var w=m.heap=e(n);w.by=e;var E=m.heapselect=f(n);E.by=f;var O=m.insertionsort=o(n);O.by=o;var M=m.quicksort=i(n);M.by=i;var U=32,z=a,N=a,C=a,S=n,V=n;"undefined"!=typeof Uint8Array&&(z=function(r){return new Uint8Array(r)},N=function(r){return new Uint16Array(r)},C=function(r){return new Uint32Array(r)},S=function(r,n){var t=new r.constructor(n);return t.set(r),t},V=function(r,n){var t;switch(n){case 16:t=N(r.length);break;case 32:t=C(r.length);break;default:throw Error("invalid array width!")}return t.set(r),t}),r.crossfilter=m})(this);